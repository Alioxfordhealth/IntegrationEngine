<?xml version="1.0" encoding="UTF-8"?>
<package xmlns="http://www.bpmi.org/2002/BPML/process" targetNamespace="Ascribe HL7 ADT Generation" lastModified="1542040253749" version="2.40.1.0"><process name="Ascribe HL7 ADT Generation" id="7d4db29c"><context/><action nomAffiche="Ascribe HL7 ADT Generation" name="Ascribe HL7 ADT Generation" id="797c9f76" comment="false"><documentation></documentation><input property="InputMessage" formatter="XML"/><output><source property="InputMessage"/></output><action nomAffiche="Extract Ascribe Message content" name="actionActivity" id="c51fbf00" comment="false"><documentation></documentation><input property="getContentResponse_1" formatter="HL7 UTf-8 all elements"/><output><source property="InputMessage"/></output><attributes xmlns=""><extension name="activityName">getContent</extension><extension name="numContent">1</extension><extension name="decode">true</extension><extension name="throwException">true</extension></attributes></action><action nomAffiche="PID 13.1 Count" name="actionActivity" id="87adc5e0" comment="false"><documentation></documentation><input property="PIDPhoneCount" formatter="Texte"/><output><source property="getContentResponse_1"/></output><attributes xmlns=""><extension name="activityName">requeteXpath</extension><extension name="requete_xpath">count(//PID.13.1)</extension><extension name="root_name">root</extension><extension name="actionVide">chainevide</extension><extension name="useOutputEncoding">true</extension><extension name="xpathVersion1">false</extension></attributes></action><action nomAffiche="XSL Ascribe HL7 transformation" name="actionActivity" id="acf35da7" comment="false"><documentation></documentation><input property="TransformedMessage" formatter="XML"/><output><source property="getContentResponse_1"/></output><attributes xmlns=""><extension name="activityName">stylesheet</extension><extension name="stylesheetLocation">AscribeHL7Message.xsl</extension><extension name="xpathVersion1">false</extension></attributes></action><while nomAffiche="While" comment="false" open="true" name="whileActivity" id="515385d9"><condition expression="$iteration; &lt; $PIDPhoneCount;"/><context/><assign nomAffiche="Assign variable" name="assignActivity" id="ff40699b" comment="false" property="xpathCounter" formatter="Texte"><documentation></documentation><source/><value>$iteration;+1</value></assign><action nomAffiche="XPath query PID.13.1" name="actionActivity" id="1219847f" comment="false"><documentation></documentation><input property="PID.13.1Value" formatter="Texte"/><output><source property="getContentResponse_1"/></output><attributes xmlns=""><extension name="activityName">requeteXpath</extension><extension name="requete_xpath">concat(substring(//PID.13.1[$xpathCounter;]/text() ,1 ,4 ),' ',substring(//PID.13.1[$xpathCounter;]/text() ,5 ,3),' ',substring(//PID.13.1[$xpathCounter;]/text() ,8 ,4))</extension><extension name="root_name">root</extension><extension name="actionVide">chainevide</extension><extension name="useOutputEncoding">true</extension><extension name="xpathVersion1">false</extension></attributes></action><action nomAffiche="XPath query PID.13.2" name="actionActivity" id="2c23629e" comment="false"><documentation></documentation><input property="PID.13.2Value" formatter="Texte"/><output><source property="getContentResponse_1"/></output><attributes xmlns=""><extension name="activityName">requeteXpath</extension><extension name="requete_xpath">//PID.13.2[$xpathCounter;]/text()</extension><extension name="root_name">root</extension><extension name="actionVide">chainevide</extension><extension name="useOutputEncoding">true</extension><extension name="xpathVersion1">false</extension></attributes></action><action nomAffiche="XPath query PID.13.3" name="actionActivity" id="1319797" comment="false"><documentation></documentation><input property="PID13.3Value" formatter="Texte"/><output><source property="getContentResponse_1"/></output><attributes xmlns=""><extension name="activityName">requeteXpath</extension><extension name="requete_xpath">//PID.13.3[$xpathCounter;]/text()</extension><extension name="root_name">root</extension><extension name="actionVide">chainevide</extension><extension name="useOutputEncoding">true</extension><extension name="xpathVersion1">false</extension></attributes></action><action nomAffiche="XPath query PID.13.4" name="actionActivity" id="1086895f" comment="false"><documentation></documentation><input property="PID.13.4Value" formatter="Texte"/><output><source property="getContentResponse_1"/></output><attributes xmlns=""><extension name="activityName">requeteXpath</extension><extension name="requete_xpath">//PID.13.4[$xpathCounter;]/text()</extension><extension name="root_name">root</extension><extension name="actionVide">chainevide</extension><extension name="useOutputEncoding">true</extension><extension name="xpathVersion1">false</extension></attributes></action><action nomAffiche="XPath query PID.13.5" name="actionActivity" id="75cd724b" comment="false"><documentation></documentation><input property="PID.13.5Value" formatter="Texte"/><output><source property="getContentResponse_1"/></output><attributes xmlns=""><extension name="activityName">requeteXpath</extension><extension name="requete_xpath">//PID.13.5[$xpathCounter;]/text()</extension><extension name="root_name">root</extension><extension name="actionVide">chainevide</extension><extension name="useOutputEncoding">true</extension><extension name="xpathVersion1">false</extension></attributes></action><action nomAffiche="Create message" name="actionActivity" id="6cb6767e" comment="false"><documentation></documentation><input property="phoneNumberXML" formatter="XML"/><attributes xmlns=""><extension name="activityName">creationMessage</extension><extension name="user_message">&lt;root&gt;&lt;PID.13.1&gt;$PID.13.1Value;&lt;/PID.13.1&gt;&lt;PID.13.2&gt;$PID.13.2Value;&lt;/PID.13.2&gt;&lt;PID.13.3&gt;$PID13.3Value;&lt;/PID.13.3&gt;&lt;PID.13.4&gt;$PID.13.4Value;&lt;/PID.13.4&gt;&lt;PID.13.5&gt;$PID.13.5Value;&lt;/PID.13.5&gt;&lt;/root&gt;@%$LF$%@</extension><extension name="useOutputEncoding">true</extension></attributes></action><action nomAffiche="Exception" name="actionActivity" id="8f1f25a9" comment="true"><documentation></documentation><attributes xmlns=""><extension name="activityName">genException</extension><extension name="user_exception">$phoneNumberXML;</extension></attributes></action><action nomAffiche="Insert XML" name="actionActivity" id="d1911038" comment="false"><documentation></documentation><input property="TransformedMessage" formatter="XML"/><attributes xmlns=""><extension name="activityName">insereMessageXml</extension><extension name="targetXPath">//PID.14.1</extension><extension name="sourceMessage">phoneNumberXML</extension><extension name="sourceXPath">//root/*</extension><extension name="targetMessage">TransformedMessage</extension><extension name="insertPosition">before</extension><extension name="xpathVersion1">false</extension></attributes></action></while><action nomAffiche="Run scenario" name="actionActivity" id="a9f40a01" comment="false"><documentation></documentation><input property="runRouteResponse_1" formatter="Texte"/><output><source property="TransformedMessage"/></output><attributes xmlns=""><extension name="activityName">runRoute</extension><extension name="routeKey">Ascribe HL7 ADT Formatter</extension><extension name="sendmode">asynchrone</extension></attributes></action><attributes xmlns=""><extension name="activityName">eventAction</extension><extension name="maxNumberOfThreads">1</extension></attributes></action></process></package>